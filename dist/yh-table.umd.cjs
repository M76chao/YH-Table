(function(n,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("element-plus")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.YhTable={},n.Vue,n.ElementPlus))})(this,function(n,e,c){"use strict";const P={class:"yh-table"},w={key:0,class:"yhtable-page"},S={key:0,class:"show-all-page"},g=((s,m)=>{const h=s.__vccOpts||s;for(const[t,f]of m)h[t]=f;return h})(e.defineComponent({__name:"YHTable",props:{data:{},columns:{},on:{default:()=>({})},table:{default:()=>({})},page:{default:()=>({})},showPage:{type:Boolean,default:!1},autoPage:{type:Boolean,default:!0},firstRendder:{type:Boolean,default:!1},showAllBtn:{type:Boolean,default:!1}},emits:["update:currentPage","update:pageSize"],setup(s,{expose:m,emit:h}){e.useCssVars(a=>({"0aa95196":V.value}));const t=s,f=e.ref(),i=e.ref([]),o=e.ref(1),l=e.ref(0),y=e.ref(0),r=e.ref(0),_=e.ref(!1),B=e.ref(!1),T=e.ref(!1),z=e.computed(()=>({...t.table,data:i.value})),E=e.computed(()=>t.columns.map(a=>({...a,headerAlign:a.headerAlign||"center",align:a.align||"center"}))),x=e.computed(()=>({pageSizes:[10,20,30,50,100],layout:"total, sizes, prev, pager, next, jumper",...t.page,pageSize:l.value,total:r.value,currentPage:o.value})),k=e.computed(()=>t.showPage?t.autoPage?l.value<r.value&&r.value>0:!0:!1),V=e.computed(()=>k.value||t.showAllBtn?"calc(100% - 40px)":"100%"),d=(a=!1)=>{T.value=!0,a&&(o.value=1),typeof t.data=="function"?b():v()},b=async()=>{B.value=!0;try{const a=await t.data({pageNo:o.value,pageSize:l.value});a?(r.value=a.total,i.value=a.list,o.value!==1&&i.value.length===0&&(o.value--,b())):(i.value=[],r.value=0)}finally{B.value=!1}},v=()=>{const a=(o.value-1)*l.value;i.value=t.data.slice(a,o.value*l.value)},N=()=>{_.value?l.value=r.value?r.value:1e9:l.value=y.value,o.value=1,d()},R=a=>{y.value=l.value,l.value=a,d(!0)},Y=a=>{o.value=a,d()};return e.onMounted(()=>{o.value=t.page.currentPage||1,l.value=t.page.pageSize||t.page.pageSizes?.[0]||20,y.value=l.value,typeof t.data=="function"?t.firstRendder&&b():v()}),e.watch(()=>t.data,a=>{Array.isArray(a)&&(r.value=a.length,t.showPage?v():i.value=a)},{immediate:!0}),m({load:d,getTable:()=>f.value}),(a,p)=>(e.openBlock(),e.createElementBlock("div",P,[e.withDirectives((e.openBlock(),e.createBlock(e.unref(c.ElTable),e.mergeProps({ref_key:"tableRef",ref:f},z.value,e.toHandlers(t.on)),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(E.value,(u,j)=>(e.openBlock(),e.createBlock(e.unref(c.ElTableColumn),e.mergeProps({key:j},{ref_for:!0},u),e.createSlots({_:2},[u.render?{name:"default",fn:e.withCtx(D=>[e.renderSlot(a.$slots,u.render,e.mergeProps({ref_for:!0},D),void 0,!0)]),key:"0"}:void 0]),1040))),128))]),_:3},16)),[[e.unref(c.vLoading),B.value]]),a.showAllBtn||k.value?(e.openBlock(),e.createElementBlock("div",w,[a.showAllBtn?(e.openBlock(),e.createElementBlock("div",S,[p[1]||(p[1]=e.createElementVNode("span",{class:"label"},"显示全部",-1)),e.createVNode(e.unref(c.ElSwitch),{modelValue:_.value,"onUpdate:modelValue":p[0]||(p[0]=u=>_.value=u),onChange:N},null,8,["modelValue"])])):e.createCommentVNode("",!0),k.value?(e.openBlock(),e.createBlock(e.unref(c.ElPagination),e.mergeProps({key:1,class:"elPagination is-background"},x.value,{onSizeChange:R,onCurrentChange:Y}),null,16)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]))}}),[["__scopeId","data-v-77607600"]]),C=s=>{s.component("YhTable",g)},A={install:C,YhTable:g};n.YhTable=g,n.default=A,n.install=C,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
